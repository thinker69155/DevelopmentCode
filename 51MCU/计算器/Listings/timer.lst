C51 COMPILER V9.59.0.0   TIMER                                                             12/01/2025 22:57:58 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE TIMER
OBJECT MODULE PLACED IN .\Objects\timer.obj
COMPILER INVOKED BY: D:\software\keil\C51\BIN\C51.EXE timer.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\计算器) DEBUG OBJECTEXT
                    -END PRINT(.\Listings\timer.lst) TABS(2) OBJECT(.\Objects\timer.obj)

line level    source

   1          #include "calc_common.h"
   2          
   3          
   4          
   5          //// ********** 延时函数（软件延时，适配11.0592MHz晶振）**********
   6          //void delay_ms(uint16_t ms) {
   7          //    uint16_t i, j;
   8          //    for (i = ms; i > 0; i--)
   9          //        for (j = 110; j > 0; j--);
  10          //}
  11          
  12          //// ********** 定时器0初始化（1ms中断，用于长按计时）**********
  13          //void Timer0_Init(void) {
  14          //    TMOD |= 0x01;          // 模式1：16位定时器
  15          //    TH0 = (65536 - 1000) / 256;  // 1ms初值（11.0592MHz）
  16          //    TL0 = (65536 - 1000) % 256;
  17          //    ET0 = 1;               // 使能定时器0中断
  18          //    TR0 = 1;               // 启动定时器0
  19          //    EA = 1;                // 开总中断
  20          //}
  21          
  22          //// ********** 定时器0中断服务函数 **********
  23          //void Timer0_ISR(void) interrupt 1 {
  24          //    TH0 = (65536 - 1000) / 256;
  25          //    TL0 = (65536 - 1000) % 256;
  26          //    
  27          //    if (key_hold_flag) {
  28          //        press_timer++;
  29          //        if (press_timer > 1000) press_timer = 1000;  // 上限1s
  30          //    } else {
  31          //        press_timer = 0;
  32          //    }
  33          //}
  34          
  35          //// ********** 判断是否为无效值（替代isnan，适配Keil C51）**********
  36          //bit is_invalid(float x) {
  37          //    return (x > 1e29f) ? 1 : 0;  // 大于1e29f视为无效值
  38          //}


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   ----    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
